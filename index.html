<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ARCHANGEL // Incident Response v4.0.1</title>
    <style>
        :root {
            --bg: #0b0e14; --side: #151921; --border: #2d333b;
            --text: #adbac7; --accent: #539bf5; --danger: #e5534b; --success: #57ab5a;
        }
        * { box-sizing: border-box; cursor: default; }
        body { 
            background: var(--bg); color: var(--text); 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            margin: 0; display: flex; height: 100vh; overflow: hidden; 
        }

        /* Tactical Sidebar */
        #sidebar { width: 360px; background: var(--side); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 20px; z-index: 100; }
        .module { background: #0b0e14; border: 1px solid var(--border); border-radius: 4px; padding: 12px; margin-bottom: 15px; }
        .label { font-size: 9px; color: #768390; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 6px; display: block; }
        
        /* Main Grid Layout */
        #main { flex: 1; display: grid; grid-template-rows: 40px 1fr 220px; background: #0d1117; }
        #top-bar { border-bottom: 1px solid var(--border); display: flex; align-items: center; padding: 0 20px; font-size: 11px; gap: 25px; background: var(--side); }
        
        /* High-Density Trace Console */
        #console-area { padding: 25px; overflow-y: hidden; position: relative; background: #040507; }
        #console { font-family: 'JetBrains Mono', 'Consolas', monospace; font-size: 13px; line-height: 1.6; color: #cdd9e5; }

        /* Real-Time Entropy/Memory Map */
        #bottom-panel { border-top: 1px solid var(--border); display: grid; grid-template-columns: 1fr 350px; background: var(--side); }
        #memory-dump { padding: 15px; font-family: monospace; font-size: 11px; color: #444c56; overflow: hidden; line-height: 1.3; }
        #packet-sniffer { border-left: 1px solid var(--border); padding: 15px; font-size: 10px; color: var(--success); overflow: hidden; }

        /* Believability Animations */
        .dot { width: 6px; height: 6px; border-radius: 50%; display: inline-block; margin-right: 6px; }
        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        .typing-line { border-left: 2px solid var(--accent); padding-left: 10px; margin-bottom: 4px; }
    </style>
</head>
<body onkeydown="processInput(event)">

    <div id="sidebar">
        <div style="font-size: 14px; font-weight: bold; margin-bottom: 25px; color: #fff;">
            ARCHANGEL <span style="color: var(--accent);">ENDPOINT</span>
        </div>
        
        <div class="module">
            <span class="label">Target Resolution</span>
            <div id="ip" style="color: var(--accent); font-family: monospace;">127.0.0.1</div>
            <div id="loc" style="font-size: 12px; margin-top: 4px;">ABU DHABI // UAE</div>
        </div>

        <div class="module">
            <span class="label">Connection Backbone</span>
            <div id="isp" style="font-size: 11px;">Scanning Local ISP...</div>
            <div style="margin-top: 8px; font-size: 10px; color: var(--success);">
                <span class="dot" style="background: var(--success);"></span> ENCRYPTED TUNNEL: ACTIVE
            </div>
        </div>

        <div class="module" style="flex: 1; overflow: hidden;">
            <span class="label">Incident Timeline</span>
            <div id="timeline" style="font-size: 10px; line-height: 1.8; color: #768390;">
                [15:11:04] Session Started<br>
                [15:11:05] Kernel Link Established
            </div>
        </div>
    </div>

    <div id="main">
        <div id="top-bar">
            <span>USER: <span style="color: #fff;">PRODIGY_40</span></span>
            <span>NODE: <span id="node-id">ARCH-772-DX</span></span>
            <span style="color: var(--danger);" class="pulse">‚óè LIVE INVESTIGATION IN PROGRESS</span>
        </div>

        <div id="console-area">
            <div id="console"></div>
        </div>

        <div id="bottom-panel">
            <div id="memory-dump"></div>
            <div id="packet-sniffer">
                <span class="label">Live Packet Stream</span>
                <div id="stream-content"></div>
            </div>
        </div>
    </div>

    <audio id="keyClick" src="https://www.soundjay.com/communication/typewriter-key-1.mp3"></audio>

    <script>
        // Real-Time Data Injection
        fetch('https://ipapi.co/json/').then(r => r.json()).then(d => {
            document.getElementById('ip').innerText = d.ip;
            document.getElementById('isp').innerText = d.org;
            document.getElementById('node-id').innerText = "ARCH-" + d.ip.split('.').pop() + "-NODE";
        });

        const commands = [
            "Initializing deep packet inspection on interface 'eth0'...",
            "Checking kernel modules for unauthorized persistence...",
            "sysctl -w net.ipv4.ip_forward=1",
            "ps -p $(pgrep sibling_process) -o comm=,args=",
            "Warning: Memory corruption detected at offset 0x40BA",
            "Decrypting AES-256 handshake for remote host...",
            "Extracting filesystem metadata from /Users/Admin/Documents/...",
            "SUCCESS: Credentials matched. Math_Prodigy verification: 40/40.",
            "Analyzing entropy in partition /dev/nvme0n1p3",
            "Connection re-routed through local Abu Dhabi proxy...",
            "Alert: File 'lantern_repair.sh' modified by external user."
        ];

        let cmdIdx = 0;
        let charIdx = 0;
        const consoleEl = document.getElementById('console');
        const memoryEl = document.getElementById('memory-dump');

        function processInput(e) {
            // WHX: Allow F5, Ctrl+R, etc.
            if (e.ctrlKey || e.metaKey || e.key.startsWith('F')) return;
            e.preventDefault();
            
            document.getElementById('keyClick').cloneNode(true).play();

            // Typing Loop
            for(let k=0; k<5; k++) {
                if (charIdx < commands[cmdIdx].length) {
                    consoleEl.innerHTML += commands[cmdIdx][charIdx];
                    charIdx++;
                } else {
                    consoleEl.innerHTML += "<br>";
                    cmdIdx = (cmdIdx + 1) % commands.length;
                    charIdx = 0;
                }
            }

            // Scroll Logic
            document.getElementById('console-area').scrollTop = document.getElementById('console-area').scrollHeight;

            updateForensics();
        }

        function updateForensics() {
            // Hex Dump Generator
            let hex = `0x${Math.floor(Math.random()*1e7).toString(16).toUpperCase()} `;
            for(let j=0; j<12; j++) hex += Math.floor(Math.random()*256).toString(16).padStart(2,'0') + " ";
            memoryEl.innerHTML += hex + "<br>";
            if(memoryEl.innerHTML.split('<br>').length > 12) memoryEl.innerHTML = memoryEl.innerHTML.split('<br>').slice(1).join('<br>');

            // Packet Stream Generator
            if (Math.random() > 0.7) {
                const stream = document.getElementById('stream-content');
                const p = document.createElement('div');
                p.innerText = `TCP [${Math.floor(Math.random()*65535)}] > TLS_V1.3 [ACK] Len=${Math.floor(Math.random()*1500)}`;
                stream.prepend(p);
                if(stream.childNodes.length > 12) stream.removeChild(stream.lastChild);
            }
        }
    </script>
</body>
</html>
